include_directories(
    ${CMAKE_SOURCE_DIR}/include
    ${CMAKE_SOURCE_DIR}/include/utils/types
    ${CMAKE_SOURCE_DIR}/include/http
    ${CMAKE_SOURCE_DIR}/include/http/request
)

# ğŸ”½ test.conf ã‚’ãƒ“ãƒ«ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã‚³ãƒ”ãƒ¼
configure_file(
    ${CMAKE_SOURCE_DIR}/test/test_config/test.conf
    ${CMAKE_CURRENT_BINARY_DIR}/test_config/test.conf
    COPYONLY
)

# HttpRequest ã®ãƒ†ã‚¹ãƒˆ
add_executable(http_request_test
    http_request_test.cpp
    ${CMAKE_SOURCE_DIR}/src/http/request/http_request.cpp
)
target_link_libraries(http_request_test PRIVATE webserv_lib gtest gtest_main)

# ğŸ”½ å®šæ•°ã‚’æ¸¡ã™
target_compile_definitions(http_request_test PRIVATE
  TEST_CONF_PATH="${CMAKE_CURRENT_BINARY_DIR}/test_config/test.conf"
)

# ğŸ”½ working directory ã‚’æ˜ç¤º
gtest_discover_tests(http_request_test
    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
)

# RequestReader é–¢é€£ã®ãƒ†ã‚¹ãƒˆ
add_executable(request_test
    request_test.cpp
)
target_link_libraries(request_test PRIVATE webserv_lib gtest gtest_main)

# ğŸ”½ ã“ã‚Œã‚‚æ˜ç¤ºï¼
gtest_discover_tests(request_test
    WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}
)

# ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
add_subdirectory(read)
add_subdirectory(parse)
